<!DOCTYPE html>
<html lang="en">

<head><script src="/niconavi/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=niconavi/livereload" data-no-instant defer></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <title>
  Tutorial 2 - Mineral Extraction and Visualisation · NicoNicoNnavi
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="NicoNavi">
<meta name="description" content="
  1. Overview
  
    
    Link to heading
  

This tutorial uses a sector-zoned garnet video to demonstrate mineral-specific boundary extraction and how to highlight optical anisotropy. Building on Tutorial 1, you will tweak settings to emphasise extinction within a single crystal and practise assigning mineral labels.

  2. Prerequisites
  
    
    Link to heading
  


NicolNavi is running with the relevant project open.
You can access nicolnavi_app/Examples/sector_zoning.avi.
You have completed Tutorial 1 (preprocessing, boundary detection, labelling).


  3. Workflow
  
    
    Link to heading
  


  3.1 Load the Video
  
    
    Link to heading
  


Click Select on the right panel.
Choose nicolnavi_app/Examples/sector_zoning.avi and open it.
The left panel shows the first frame as a 1000 px square image.
Press Start to begin discretisation and rotation-centre estimation.


  3.2 Adjust the Rotation Centre
  
    
    Link to heading
  


After processing, the rotation-centre screen appears.



In this dataset the detected centre is offset from the true concentric pattern. Click cx and cy to move the red cross to the actual centre.


Figure: Centre after manual adjustment.

Click Continue to confirm.


  3.3 Review Maps and Brightness Correction
  
    
    Link to heading
  


Open Image list and examine the standard maps.


  
      
          Map
          Description
      
  
  
      
          color
          Brightest colours observed during a rotation.
      
      
          extinction color
          Colours at the darkest instant. Re-run preprocessing if full extinction is missing.
      
      
          R
          Retardation at each pixel within the specified search range.
      
      
          extinction angle
          Extinction angles for each pixel.
      
      
          raw image
          Original frames. Selecting phi = 22.5° shows the frame at that angle.
      
  


Switching between color and extinction color may reveal that color looks darker.


`Image list = color`

`Image list = extinction color`


By default, color applies brightness correction. If \(B_{\max}(x, y)\) and \(B_{\min}(x, y)\) are the maximum and minimum brightness within a rotation, the display intensity is">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Tutorial 2 - Mineral Extraction and Visualisation">
  <meta name="twitter:description" content="1. Overview Link to heading This tutorial uses a sector-zoned garnet video to demonstrate mineral-specific boundary extraction and how to highlight optical anisotropy. Building on Tutorial 1, you will tweak settings to emphasise extinction within a single crystal and practise assigning mineral labels.
2. Prerequisites Link to heading NicolNavi is running with the relevant project open. You can access nicolnavi_app/Examples/sector_zoning.avi. You have completed Tutorial 1 (preprocessing, boundary detection, labelling). 3. Workflow Link to heading 3.1 Load the Video Link to heading Click Select on the right panel. Choose nicolnavi_app/Examples/sector_zoning.avi and open it. The left panel shows the first frame as a 1000 px square image. Press Start to begin discretisation and rotation-centre estimation. 3.2 Adjust the Rotation Centre Link to heading After processing, the rotation-centre screen appears. In this dataset the detected centre is offset from the true concentric pattern. Click cx and cy to move the red cross to the actual centre. Figure: Centre after manual adjustment. Click Continue to confirm. 3.3 Review Maps and Brightness Correction Link to heading Open Image list and examine the standard maps. Map Description color Brightest colours observed during a rotation. extinction color Colours at the darkest instant. Re-run preprocessing if full extinction is missing. R Retardation at each pixel within the specified search range. extinction angle Extinction angles for each pixel. raw image Original frames. Selecting phi = 22.5° shows the frame at that angle. Switching between color and extinction color may reveal that color looks darker. `Image list = color` `Image list = extinction color` By default, color applies brightness correction. If \(B_{\max}(x, y)\) and \(B_{\min}(x, y)\) are the maximum and minimum brightness within a rotation, the display intensity is">

<meta property="og:url" content="http://localhost:1313/niconavi/tutorial/tutorial2/">
  <meta property="og:site_name" content="NicoNicoNnavi">
  <meta property="og:title" content="Tutorial 2 - Mineral Extraction and Visualisation">
  <meta property="og:description" content="1. Overview Link to heading This tutorial uses a sector-zoned garnet video to demonstrate mineral-specific boundary extraction and how to highlight optical anisotropy. Building on Tutorial 1, you will tweak settings to emphasise extinction within a single crystal and practise assigning mineral labels.
2. Prerequisites Link to heading NicolNavi is running with the relevant project open. You can access nicolnavi_app/Examples/sector_zoning.avi. You have completed Tutorial 1 (preprocessing, boundary detection, labelling). 3. Workflow Link to heading 3.1 Load the Video Link to heading Click Select on the right panel. Choose nicolnavi_app/Examples/sector_zoning.avi and open it. The left panel shows the first frame as a 1000 px square image. Press Start to begin discretisation and rotation-centre estimation. 3.2 Adjust the Rotation Centre Link to heading After processing, the rotation-centre screen appears. In this dataset the detected centre is offset from the true concentric pattern. Click cx and cy to move the red cross to the actual centre. Figure: Centre after manual adjustment. Click Continue to confirm. 3.3 Review Maps and Brightness Correction Link to heading Open Image list and examine the standard maps. Map Description color Brightest colours observed during a rotation. extinction color Colours at the darkest instant. Re-run preprocessing if full extinction is missing. R Retardation at each pixel within the specified search range. extinction angle Extinction angles for each pixel. raw image Original frames. Selecting phi = 22.5° shows the frame at that angle. Switching between color and extinction color may reveal that color looks darker. `Image list = color` `Image list = extinction color` By default, color applies brightness correction. If \(B_{\max}(x, y)\) and \(B_{\min}(x, y)\) are the maximum and minimum brightness within a rotation, the display intensity is">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="tutorial">
    <meta property="article:published_time" content="2025-10-15T13:10:14+09:00">
    <meta property="article:modified_time" content="2025-10-15T13:10:14+09:00">




<link rel="canonical" href="http://localhost:1313/niconavi/tutorial/tutorial2/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/niconavi/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/niconavi/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/niconavi/">
      NicoNicoNnavi
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/install/">Install</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/acquisition/">Data Acquisition</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/tutorial/">Tutorial</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/niconavi/ja/tutorial/tutorial2/">JA</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container page">
  <article>
    <header>
      <h1 class="title">
        <a class="title-link" href="http://localhost:1313/niconavi/tutorial/tutorial2/">
          Tutorial 2 - Mineral Extraction and Visualisation
        </a>
      </h1>
    </header>

    <h2 id="1-overview">
  1. Overview
  <a class="heading-link" href="#1-overview">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>This tutorial uses a sector-zoned garnet video to demonstrate mineral-specific boundary extraction and how to highlight optical anisotropy. Building on Tutorial 1, you will tweak settings to emphasise extinction within a single crystal and practise assigning mineral labels.</p>
<h2 id="2-prerequisites">
  2. Prerequisites
  <a class="heading-link" href="#2-prerequisites">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>NicolNavi is running with the relevant project open.</li>
<li>You can access <code>nicolnavi_app/Examples/sector_zoning.avi</code>.</li>
<li>You have completed Tutorial 1 (preprocessing, boundary detection, labelling).</li>
</ul>
<h2 id="3-workflow">
  3. Workflow
  <a class="heading-link" href="#3-workflow">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="31-load-the-video">
  3.1 Load the Video
  <a class="heading-link" href="#31-load-the-video">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Click <code>Select</code> on the right panel.</li>
<li>Choose <code>nicolnavi_app/Examples/sector_zoning.avi</code> and open it.</li>
<li>The left panel shows the first frame as a 1000 px square image.</li>
<li>Press <code>Start</code> to begin discretisation and rotation-centre estimation.</li>
</ol>
<h3 id="32-adjust-the-rotation-centre">
  3.2 Adjust the Rotation Centre
  <a class="heading-link" href="#32-adjust-the-rotation-centre">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>After processing, the rotation-centre screen appears.</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic1.png" style="width: 100%;">
<ol start="2">
<li>In this dataset the detected centre is offset from the true concentric pattern. Click <code>cx</code> and <code>cy</code> to move the red cross to the actual centre.</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic2.png" style="width: 100%;">
Figure: Centre after manual adjustment.
<ol start="3">
<li>Click <code>Continue</code> to confirm.</li>
</ol>
<h3 id="33-review-maps-and-brightness-correction">
  3.3 Review Maps and Brightness Correction
  <a class="heading-link" href="#33-review-maps-and-brightness-correction">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Open <code>Image list</code> and examine the standard maps.</li>
</ol>
<table>
  <thead>
      <tr>
          <th>Map</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>color</code></td>
          <td>Brightest colours observed during a rotation.</td>
      </tr>
      <tr>
          <td><code>extinction color</code></td>
          <td>Colours at the darkest instant. Re-run preprocessing if full extinction is missing.</td>
      </tr>
      <tr>
          <td><code>R</code></td>
          <td>Retardation at each pixel within the specified search range.</td>
      </tr>
      <tr>
          <td><code>extinction angle</code></td>
          <td>Extinction angles for each pixel.</td>
      </tr>
      <tr>
          <td><code>raw image</code></td>
          <td>Original frames. Selecting <code>phi = 22.5°</code> shows the frame at that angle.</td>
      </tr>
  </tbody>
</table>
<ol start="2">
<li>Switching between <code>color</code> and <code>extinction color</code> may reveal that <code>color</code> looks darker.</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic3.png" style="width: 80%;">
`Image list = color`
<img src="/images/page/tutorial/tutorial2/pic4.png" style="width: 80%;">
`Image list = extinction color`
<ol start="3">
<li>
<p>By default, <code>color</code> applies <strong>brightness correction</strong>. If \(B_{\max}(x, y)\) and \(B_{\min}(x, y)\) are the maximum and minimum brightness within a rotation, the display intensity is</p>
\[
   I_{\text{corr}}(x, y) = B_{\max}(x, y) - B_{\min}(x, y).
   \]<p>The correction compensates for uneven illumination. When the sensor saturates, however, \(B_{\max}(x, y) \approx B_{\min}(x, y)\), making the corrected image look too dark.</p>
</li>
<li>
<p>If saturation is suspected, clear the <strong>brightness correction</strong> checkbox. NicolNavi then shows \(I_{\text{corr}}(x, y) = B_{\max}(x, y)\) directly so you can inspect the true brightness.</p>
</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic5.png" style="width: 80%;">
`Image list = color` with brightness correction disabled.
<h3 id="34-detect-grain-boundaries">
  3.4 Detect Grain Boundaries
  <a class="heading-link" href="#34-detect-grain-boundaries">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Once the brightness setting is confirmed, click <code>Detect Grain Boundary</code> to generate the initial boundary overlay.</li>
<li>Adjust <code>median filter</code> and <code>parameters</code> if needed. In this example <code>boundary connectivity</code> is set to 5.</li>
<li>Press <code>Calculate grain boundaries</code> to apply the adjustments.</li>
<li>When the boundaries look correct, choose <code>Continue</code> to move to the labelling screen.</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic6.png" style="width: 30%;">
<h3 id="35-assign-mineral-labels">
  3.5 Assign Mineral Labels
  <a class="heading-link" href="#35-assign-mineral-labels">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Enter <code>garnet</code> in <code>Label Name</code> and press <code>+</code>. Add <code>inclusion</code> and <code>matrix</code> in the same way.</li>
<li>Select <code>garnet</code> and click 5–10 representative grains in the left panel to add training samples.</li>
<li>Repeat for <code>inclusion</code> and <code>matrix</code>.</li>
<li>If misclassification persists, expand each training set until the preview stabilises. In this dataset 48 grains were labelled.</li>
<li>Click <code>Done</code> to confirm.</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic7.png" style="width: 100%;">
<h3 id="36-visualise-optical-anisotropy">
  3.6 Visualise Optical Anisotropy
  <a class="heading-link" href="#36-visualise-optical-anisotropy">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Switch to the <code>Analysis</code> tab and uncheck <code>inclusion</code> and <code>matrix</code> so only garnet remains.</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic8.png" style="width: 30%;">
<ol start="2">
<li>Return to the <code>map</code> tab and set <code>image list</code> to <code>extinction angle</code>. All other minerals render in black, highlighting the sector zoning within the garnet.</li>
</ol>
<img src="/images/page/tutorial/tutorial2/pic9.png" style="width: 100%;">
<ol start="3">
<li>Use the top menu <code>Save as PDF</code> to export the view if required.</li>
</ol>
<div class="notice info">
  <div class="notice-title">
    <i class="fa-solid fa-exclamation-circle" aria-hidden="true"></i>Info
  </div>
  <div class="notice-content">This approach also emphasises undulose extinction in single crystals.</div>
</div>

<h2 id="4-wrap-up">
  4. Wrap-Up
  <a class="heading-link" href="#4-wrap-up">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>Disable <strong>brightness correction</strong> when saturation darkens the <code>color</code> map.</li>
<li>Accurate mineral labels let you isolate maps such as <code>extinction angle</code> for each mineral, making it easy to crop and visualise the desired phase.</li>
</ul>

  </article>
</section>

  

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2025
     NicoNavi 
    ·
    
    Powered by 
    Tan Furukawa
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/niconavi/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
