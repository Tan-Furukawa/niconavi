<!DOCTYPE html>
<html lang="en">

<head>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <title>
  Tutorial 3 - Crystal Orientation Analysis · NicoNicoNnavi
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="NicoNavi">
<meta name="description" content="
  1. Overview
  
    
    Link to heading
  

Use this tutorial to learn the NicolNavi workflow for crystallographic preferred orientation (CPO) analysis with a polycrystalline quartz sample. Building on Tutorials 1 and 2, you will combine multiple rotation videos, estimate quartz c-axis orientations, and review the results with pole figures and COI maps.

  2. Prerequisites
  
    
    Link to heading
  


NicolNavi is running with the target project open.
You can access the sample videos under nicolnavi_app/Examples/cpo/.
You have completed Tutorials 1 and 2 (preprocessing, boundary detection, labelling).
CPO analysis requires significant memory. Use a computer with at least 16 GB RAM; lower-spec systems may halt mid-process.


  3. Video Set
  
    
    Link to heading
  

NicolNavi&rsquo;s CPO workflow consumes five videos. Refer to the Data Acquisition page for filming details.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Tutorial 3 - Crystal Orientation Analysis">
  <meta name="twitter:description" content="1. Overview Link to heading Use this tutorial to learn the NicolNavi workflow for crystallographic preferred orientation (CPO) analysis with a polycrystalline quartz sample. Building on Tutorials 1 and 2, you will combine multiple rotation videos, estimate quartz c-axis orientations, and review the results with pole figures and COI maps.
2. Prerequisites Link to heading NicolNavi is running with the target project open. You can access the sample videos under nicolnavi_app/Examples/cpo/. You have completed Tutorials 1 and 2 (preprocessing, boundary detection, labelling). CPO analysis requires significant memory. Use a computer with at least 16 GB RAM; lower-spec systems may halt mid-process. 3. Video Set Link to heading NicolNavi’s CPO workflow consumes five videos. Refer to the Data Acquisition page for filming details.">

<meta property="og:url" content="https://tan-furukawa.github.io/niconavi/tutorial/tutorial3/">
  <meta property="og:site_name" content="NicoNicoNnavi">
  <meta property="og:title" content="Tutorial 3 - Crystal Orientation Analysis">
  <meta property="og:description" content="1. Overview Link to heading Use this tutorial to learn the NicolNavi workflow for crystallographic preferred orientation (CPO) analysis with a polycrystalline quartz sample. Building on Tutorials 1 and 2, you will combine multiple rotation videos, estimate quartz c-axis orientations, and review the results with pole figures and COI maps.
2. Prerequisites Link to heading NicolNavi is running with the target project open. You can access the sample videos under nicolnavi_app/Examples/cpo/. You have completed Tutorials 1 and 2 (preprocessing, boundary detection, labelling). CPO analysis requires significant memory. Use a computer with at least 16 GB RAM; lower-spec systems may halt mid-process. 3. Video Set Link to heading NicolNavi’s CPO workflow consumes five videos. Refer to the Data Acquisition page for filming details.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="tutorial">
    <meta property="article:published_time" content="2025-10-15T13:10:14+09:00">
    <meta property="article:modified_time" content="2025-10-15T13:10:14+09:00">




<link rel="canonical" href="https://tan-furukawa.github.io/niconavi/tutorial/tutorial3/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/niconavi/css/coder.min.24022876d48fb15813406bbe8c1c4d3b9ab49378f6ff34712fff078e2c04ac12.css" integrity="sha256-JAIodtSPsVgTQGu&#43;jBxNO5q0k3j2/zRxL/8HjiwErBI=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/niconavi/css/coder-dark.min.f7e815ec05a254f4b89393ec609b48ef12a7894283e81d06f3804eb939b90bc7.css" integrity="sha256-9&#43;gV7AWiVPS4k5PsYJtI7xKniUKD6B0G84BOuTm5C8c=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://tan-furukawa.github.io/niconavi/">
      NicoNicoNnavi
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/install/">Install</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/acquisition/">Data Acquisition</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/niconavi/tutorial/">Tutorial</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/niconavi/ja/tutorial/tutorial3/">JA</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container page">
  <article>
    <header>
      <h1 class="title">
        <a class="title-link" href="https://tan-furukawa.github.io/niconavi/tutorial/tutorial3/">
          Tutorial 3 - Crystal Orientation Analysis
        </a>
      </h1>
    </header>

    <h2 id="1-overview">
  1. Overview
  <a class="heading-link" href="#1-overview">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Use this tutorial to learn the NicolNavi workflow for crystallographic preferred orientation (CPO) analysis with a polycrystalline quartz sample. Building on Tutorials 1 and 2, you will combine multiple rotation videos, estimate quartz c-axis orientations, and review the results with pole figures and COI maps.</p>
<h2 id="2-prerequisites">
  2. Prerequisites
  <a class="heading-link" href="#2-prerequisites">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>NicolNavi is running with the target project open.</li>
<li>You can access the sample videos under <code>nicolnavi_app/Examples/cpo/</code>.</li>
<li>You have completed Tutorials 1 and 2 (preprocessing, boundary detection, labelling).</li>
<li><strong>CPO analysis requires significant memory. Use a computer with at least 16 GB RAM; lower-spec systems may halt mid-process.</strong></li>
</ul>
<h2 id="3-video-set">
  3. Video Set
  <a class="heading-link" href="#3-video-set">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>NicolNavi&rsquo;s CPO workflow consumes five videos. Refer to the Data Acquisition page for filming details.</p>
<table>
  <thead>
      <tr>
          <th>Capture condition</th>
          <th>Filename</th>
          <th>Purpose</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>XPL Rotated</td>
          <td><code>XPL.avi</code></td>
          <td>360° rotation under crossed Nicols</td>
      </tr>
      <tr>
          <td>XPL + λ-Plate Rotated</td>
          <td><code>XPL-lambda.avi</code></td>
          <td>Rotation with the first-order red plate inserted</td>
      </tr>
      <tr>
          <td>XPL + λ-Plate 0° tilt</td>
          <td><code>0deg-tilt.avi</code></td>
          <td>Tilted section at 0° while sweeping the focus</td>
      </tr>
      <tr>
          <td>XPL + λ-Plate 45° tilt</td>
          <td><code>45deg-tilt.avi</code></td>
          <td>Tilted section at 45° while sweeping the focus</td>
      </tr>
      <tr>
          <td>XPL + λ-Plate 45° (no tilt)</td>
          <td><code>45deg-not-tilt.avi</code></td>
          <td>Short clip at 45° with the section kept horizontal</td>
      </tr>
  </tbody>
</table>
<h2 id="4-workflow">
  4. Workflow
  <a class="heading-link" href="#4-workflow">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="41-load-videos-and-set-retardation">
  4.1 Load Videos and Set Retardation
  <a class="heading-link" href="#41-load-videos-and-set-retardation">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>In the <code>map</code> tab, click <code>Select</code> beside <code>XPL Rotated</code> and choose <code>Examples/cpo/XPL.avi</code>.</li>
<li>Repeat for the remaining inputs (<code>XPL-lambda.avi</code>, <code>0deg-tilt.avi</code>, <code>45deg-tilt.avi</code>, <code>45deg-not-tilt.avi</code>).</li>
<li>After all files are loaded, set <code>max retardation</code> in the <code>XPL Rotated</code> section. Use the highest quartz retardation expected in the sample; the default 300 nm works here and is sufficient for c-axis estimation. You will refine the value later if needed.</li>
</ol>

<div class="notice notice-info">This <code>max retardation</code> guides extinction-angle and retardation estimates during preprocessing.</div>


<div class="notice notice-warning">Entering values above 300 nm increases the risk of failing to resolve c-axis inclinations. Keep the value at or below 300 nm when you intend to calculate orientations, and prepare thin sections so that quartz retardation stays within that range.</div>

<img src="/images/page/tutorial/tutorial3/pic1.png" style="width: 30%;">
<h3 id="42-preprocess-and-check-the-rotation-centre">
  4.2 Preprocess and Check the Rotation Centre
  <a class="heading-link" href="#42-preprocess-and-check-the-rotation-centre">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Click <code>Start</code> to begin discretisation and reference image generation. Processing takes longer than in Tutorials 1 and 2.</li>
<li>On the rotation-centre screen, confirm that the red cross aligns with the concentric pattern. For this dataset the automatic position is adequate, so you can continue without adjustment.</li>
</ol>
<h3 id="43-tune-grain-boundary-parameters">
  4.3 Tune Grain-Boundary Parameters
  <a class="heading-link" href="#43-tune-grain-boundary-parameters">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Return to the <code>map</code> tab and run <code>Detect Grain Boundary</code>.</li>
<li>Increase the <code>median filter</code> slider by one step and adjust the other sensitivity controls as shown below.</li>
<li>Click <code>Calculate grain boundaries</code> to update the mask. Once satisfied, choose <code>Continue</code> to enter the labelling stage.</li>
</ol>
<img src="/images/page/tutorial/tutorial3/pic2.png" style="width: 30%;">
<h3 id="44-assign-labels">
  4.4 Assign Labels
  <a class="heading-link" href="#44-assign-labels">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>The goal is to compare the quartz vein with the surrounding single crystals. Add <code>single crystal quartz</code> and <code>vein quartz</code> as label names.</li>
<li>Select each label in turn and click the corresponding grains on the left panel. In this example 17 grains were labelled, but the required number varies by dataset.</li>
<li>Expand the training set if misclassifications remain. When the preview stabilises, click <code>Done</code>.</li>
</ol>
<img src="/images/page/tutorial/tutorial3/pic3.png" style="width: 100%;">
<h3 id="45-run-cpo-analysis">
  4.5 Run CPO Analysis
  <a class="heading-link" href="#45-run-cpo-analysis">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Switch to the <code>analysis</code> tab and change the view from <code>rose diagram</code> to <code>CPO</code>.</li>
<li>Enter the maximum retardation determined earlier (260 in this example) into <code>max R</code>, then press <code>Start CPO computation</code>.</li>
</ol>

<div class="notice notice-info"><ul>
<li>If the thin-section thickness is known, switch the radio button from <code>max R</code> to <code>thickness</code> and enter the value.</li>
<li>When the thickness is unknown, use the mineral&rsquo;s maximum retardation. You can read it from the <code>histogram</code> view (<code>retardation</code>) under <code>information</code>. Here the maximum quartz value is 260.</li>
</ul>
</div>


<div class="notice notice-warning">Histogram maxima are sensitive to outliers: a single overestimated grain can inflate the value. Check multiple representative grains or use a percentile (e.g., 95th) to refine <code>max R</code>.</div>

<ol start="3">
<li>After processing, a COI (crystal orientation index) entry appears in the <code>map</code> tab <code>image list</code>.</li>
</ol>

<div class="notice notice-info">The <code>max R</code> value is used to recompute retardation and derive c-axis inclinations during CPO analysis.</div>

<img src="/images/page/tutorial/tutorial3/pic4.png" style="width: 30%;">

<div class="notice notice-warning">Switching tabs or minimising the app during computation can interrupt the process. Wait until the progress bar disappears.</div>

<h3 id="46-inspect-coi-maps">
  4.6 Inspect COI Maps
  <a class="heading-link" href="#46-inspect-coi-maps">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>In <code>image list</code>, select <code>map coi</code> and choose <code>φ = 0–360°</code>. Quartz c-axis orientations now appear in pseudo-colour.</li>
</ol>

<div class="notice notice-info">COI maps typically contain blank regions because tilting shifts the field of view, creating pixels without valid references.</div>

<img src="/images/page/tutorial/tutorial3/pic5.png" style="width: 100%;">
<h3 id="47-plot-pole-figures">
  4.7 Plot Pole Figures
  <a class="heading-link" href="#47-plot-pole-figures">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>Return to <code>analysis</code>, deselect <code>single crystal quartz</code>, and leave <code>vein quartz</code> checked to focus on the vein.</li>
<li>Switch the view to <code>polar plot</code> and keep <code>φ = 0–360°</code> selected. Each grain is plotted as a single point in the pole figure.</li>
</ol>
<img src="/images/page/tutorial/tutorial3/pic6.png" style="width: 100%;">
<ol start="3">
<li>Enable <code>Plot for each pixel</code> to draw orientations at pixel resolution. Use this to assess intra-grain dispersion.</li>
</ol>
<img src="/images/page/tutorial/tutorial3/pic7.png" style="width: 100%;">
<ol start="4">
<li>Tick <code>display points</code> to overlay the sampled orientation data. NicolNavi adds 0.5% noise by default to prevent overlapping points; adjust <code>Point noise</code> if required.</li>
</ol>
<img src="/images/page/tutorial/tutorial3/pic8.png" style="width: 100%;">
<h2 id="5-wrap-up">
  5. Wrap-Up
  <a class="heading-link" href="#5-wrap-up">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>CPO analysis reconstructs phase shifts across multiple videos to estimate quartz c-axis orientations.</li>
<li>Correct labels let you focus on regions of interest—such as veins or single crystals—in both pole figures and COI maps.</li>
</ul>

  </article>
</section>

  

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2025
     NicoNavi 
    ·
    
    Powered by 
    Tan Furukawa
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/niconavi/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
